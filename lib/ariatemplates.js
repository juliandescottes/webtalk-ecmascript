// atcore.js

(function(){typeof Aria=="undefined"&&(Aria={}),Aria._start=(new Date).getTime(),Aria.$global=function(){return this}(),Aria.$frameworkWindow=Aria.$frameworkWindow||Aria.$global.window,Aria.$window=Aria.$window||Aria.$frameworkWindow;var a={_abstract:1,_boolean:1,_break:1,_byte:1,_case:1,_catch:1,_char:1,_class:1,_const:1,_continue:1,_debugger:1,_default:1,_delete:1,_do:1,_double:1,_else:1,_enum:1,_export:1,_extends:1,_false:1,_final:1,_finally:1,_float:1,_for:1,_function:1,_goto:1,_if:1,_implements:1,_import:1,_in:1,_instanceof:1,_int:1,_interface:1,_long:1,_native:1,_new:1,_null:1,_package:1,_private:1,_protected:1,_public:1,_return:1,_short:1,_static:1,_super:1,_switch:1,_synchronized:1,_this:1,_throw:1,_throws:1,_transient:1,_true:1,_try:1,_typeof:1,_var:1,_void:1,_volatile:1,_while:1,_with:1,_constructor:1,_prototype:1};Aria.NULL_CLASSPATH="$classpath argument (or both $class and $package arguments) is mandatory and must be a string.",Aria.INVALID_NAMESPACE="Invalid namespace: %1",Aria.INVALID_DEFCLASSPATH="Invalid definition classpath: %1",Aria.INVALID_CLASSNAME_FORMAT="%2Invalid class name : '%1'. Class name must be a string and start with a capital case.",Aria.INVALID_CLASSNAME_RESERVED="%2Invalid class name: '%1'. Class name must be a string cannot be a reserved word.",Aria.INVALID_PACKAGENAME_FORMAT="%2Invalid package name : '%1'. Package name must be a string must start with a small case.",Aria.INVALID_PACKAGENAME_RESERVED="%2Invalid package name: '%1'. Package name must be a string cannot be a reserved word.",Aria.INSTANCE_OF_UNKNOWN_CLASS="Cannot create instance of class '%1'",Aria.DUPLICATE_CLASSNAME="class names in a class hierarchy must be different: %1",Aria.WRONG_BASE_CLASS="super class for %1 is not properly defined: base classes (%2) must be defined through Aria.classDefinition()",Aria.BASE_CLASS_UNDEFINED="super class for %1 is undefined (%2)",Aria.INCOHERENT_CLASSPATH="$class or $package is incoherent with $classpath",Aria.INVALID_INTERFACES="Invalid interface definition in Class %1",Aria.PARENT_NOTCALLED="Error: the %1 of %2 was not called in %3.",Aria.WRONGPARENT_CALLED="Error: the %1 of %2 was called instead of %3 in %4.",Aria.REDECLARED_EVENT="Redeclared event name: %1 in %2",Aria.INVALID_EXTENDSTYPE="Invalid $extendsType property for class %1.",Aria.TEXT_TEMPLATE_HANDLE_CONFLICT="Template error: can't load text template '%1' defined in '%2'. A macro, a library, a resource, a variable or another text template has already been declared with the same name.",Aria.RESOURCES_HANDLE_CONFLICT="Template error: can't load resources '%1' defined in '%2'. A macro, a library, a text template, a variable or another resource has already been declared with the same name.",Aria.CANNOT_EXTEND_SINGLETON="Class %1 cannot extend singleton class %2",Aria.FUNCTION_PROTOTYPE_RETURN_NULL="Prototype function of %1 cannot returns null",Aria.$classpath="Aria",Aria.$logDebug=function(){},Aria.$logInfo=function(){},Aria.$logWarn=function(){},Aria.$logError=function(){};var b=function(a,b){if(!a||typeof a!="string")return Aria.$logError(Aria.NULL_CLASSPATH),!1;var e=a.split("."),f=e.length,g;for(var h=0;h<f-1;h++)if(!d(e[h],b))return!1;return c(e[f-1],b)?!0:!1},c=function(a,b){return b=b||"",!a||!a.match(/^[_A-Z]\w*$/)?(Aria.$logError(Aria.INVALID_CLASSNAME_FORMAT,[a,b]),!1):Aria.isJsReservedWord(a)?(Aria.$logError(Aria.INVALID_CLASSNAME_RESERVED,[a,b]),!1):!0},d=function(a,b){return b=b||"",a?Aria.isJsReservedWord(a)?(Aria.$logError(Aria.INVALID_PACKAGENAME_RESERVED,[a,b]),!1):(a.match(/^[a-z]\w*$/)||Aria.$logInfo(Aria.INVALID_PACKAGENAME_FORMAT,[a,b]),!0):(Aria.$logError(Aria.INVALID_PACKAGENAME_FORMAT,[a,b]),!1)},e=null,f=0,g=0,h={},i={},j=[],k=function(a,b,c,d,e){var f=!a["aria:nextCall"];return!f&&a["aria:nextCall"]!=b.$classpath&&Aria.$logError(Aria.WRONGPARENT_CALLED,[d,b.$classpath,a["aria:nextCall"],a.$classpath]),a["aria:nextCall"]=c?c.classDefinition.$classpath:null,b[d]?b[d].apply(a,e):c&&d=="$destructor"&&c.prototype.$destructor.apply(a,e),a["aria:nextCall"]&&a["aria:nextCall"]!="aria.core.JsObject"&&Aria.$logError(Aria.PARENT_NOTCALLED,[d,a["aria:nextCall"],b.$classpath]),f&&(a["aria:nextCall"]=undefined),f},l=function(a,b){return Aria.memCheckMode?function(){try{this["aria:objnumber"]||(f++,this["aria:objnumber"]=f,h[f]=this),k(this,a,b,"$constructor",arguments)}catch(c){throw this["aria:objnumber"]&&(g++,h[this["aria:objnumber"]]=null,delete h[this["aria:objnumber"]],this["aria:objnumber"]=null),c}}:a.$constructor},m=function(a,b){return Aria.memCheckMode?function(){!k(this,a,b,"$destructor",arguments),this["aria:objnumber"]&&(g++,h[this["aria:objnumber"]]=null,delete h[this["aria:objnumber"]],this["aria:objnumber"]=null)}:a.$destructor},n=function(a){aria.templates.Layout.setRootDim(a)},o=function(a,b,c){b&&Aria.$logError(b,c),e&&e.notifyClassLoadError(a)},p=function(a,b,c){var d=!1;for(var e in b)b.hasOwnProperty(e)&&(d||(d=!0),a[e]!=null?Aria.$logError(Aria.REDECLARED_EVENT,[e,c]):a[e]=b[e]);return d};Aria.__mergeEvents=p,Aria.minSizeMode=Aria.minSizeMode===!0,Aria.debug=Aria.debug===!0,Aria.enableProfiling=Aria.enableProfiling===!0,Aria.memCheckMode=Aria.memCheckMode===!0,Aria.FRAMEWORK_PREFIX=Aria.FRAMEWORK_PREFIX||"aria:",Aria.FRAMEWORK_RESOURCES=Aria.FRAMEWORK_RESOURCES||"aria/resources/",Aria.$classDefinitions={},Aria.$classes=[],Aria.__undisposedObjects=h,Aria.activateTestMode=function(){Aria.testMode=!0;var a=Aria.rootTemplates;if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b];d.$refresh()}},Aria.dispose=function(a){if(a){var b,c,d;if(typeof a=="string"){b=a,c=Aria.getClassRef(b);if(!c)return;d=c.classDefinition||c.interfaceDefinition;if(!d)return}else{c=a,d=c.classDefinition||c.interfaceDefinition;if(!d)return;b=d.$classpath;if(!b)return}var e=b.split("."),i=e[e.length-1];e.splice(e.length-1,1),e=Aria.nspace(e.join("."));if(c==e[i]){d.$singleton&&c.$dispose(),d.$onunload&&d.$onunload.call(d.$noargConstructor.prototype,c),delete e[i],delete this.$classDefinitions[b];for(var j=0,k;k=this.$classes[j];j++)if(k==c){this.$classes.splice(j,1);break}}}else{var l=Aria.$classes.slice(0);for(var j=l.length-1;j>=0;j--){var m=l[j];Aria.dispose(m)}l=null;var n=Aria.memCheckMode;Aria=null;if(n)return{nbConstructions:f,nbDestructions:g,nbNotDisposed:f-g,notDisposed:h}}},Aria.nspace=function(a,b,c){c==null&&(c=Aria.$global),b=b!==!1;if(a=="")return c;if(!a||typeof a!="string")return Aria.$logError(Aria.INVALID_NAMESPACE,[a]),null;var d=a.split("."),e=d.length,f;for(var g=0;g<e;g++){f=d[g];if(!f||Aria.isJsReservedWord(f))return Aria.$logError(Aria.INVALID_NAMESPACE,[a]),null;if(!c[f]){if(!b)return null;c[f]={}}c=c[f]}return c};var q={};Aria.getClassRef=function(a){return q[a]||(q[a]=Aria.nspace(a,!1))},Aria.cleanGetClassRefCache=function(a){a?delete q[a]:q={}},Aria.getClassInstance=function(a,b){var c=Aria.getClassRef(a);if(c)return new c(b);Aria.$logError(Aria.INSTANCE_OF_UNKNOWN_CLASS,[a])},Aria.isJsReservedWord=function(b){return a["_"+b]?!0:!1},Aria.checkJsVarName=function(a){return a.match(/^[a-zA-Z_\$][\w\$]*$/)?Aria.isJsReservedWord(a)?!1:!0:!1},Aria.tplScriptDefinition=function(a){Aria.classDefinition({$classpath:a.$classpath,$dependencies:a.$dependencies,$resources:a.$resources,$statics:a.$statics,$texts:a.$texts,$prototype:a.$prototype,$onload:function(b){b.tplScriptDefinition=a},$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),a.$constructor&&a.$constructor.call(this)},$destructor:a.$destructor?function(){a.$destructor.call(this),this.$Template.$destructor.call(this)}:null})},Aria.classDefinition=function(a){if(!a)return Aria.$logError(Aria.NULL_CLASSPATH);var c=a.$classpath,d=a.$class,f=a.$package,g=a.$extends;if(!c&&(d==null||f==null))return Aria.$logError(Aria.NULL_CLASSPATH);var h,i,j;if(c){j=c;var k=j.lastIndexOf(".");k>-1?(h=j.slice(0,k),i=j.slice(k+1)):(h="",i=j);if(d&&d!=i||f&&f!=h)return Aria.$logError(Aria.INCOHERENT_CLASSPATH);a.$class=i,a.$package=h}else i=d,h=a.$package,j=h+"."+i,a.$classpath=j;if(!b(j,"classDefinition: "))return;a.$events||(a.$events={}),a.$noargConstructor=new Function,(!g||g.match(/^\s*$/))&&j!="aria.core.JsObject"&&(g=a.$extends="aria.core.JsObject"),a.$constructor||(a.$constructor=new Function(a.$extends+".prototype.constructor.apply(this, arguments);")),this.$classDefinitions[j]=a;var l=!0;if(e){var m={TPL:a.$templates,CSS:a.$css,TML:a.$macrolibs},n=[],o=a.$dependencies||[];a.$implements&&a.$implements.length>0&&(o=o.concat(a.$implements));if(aria.utils.Type.isObject(a.$resources))for(var p in a.$resources)a.$resources.hasOwnProperty(p)&&(a.$resources[p].hasOwnProperty("provider")?o.push(a.$resources[p].provider):n.push(a.$resources[p]));aria.utils.Type.isObject(a.$texts)&&(m.TXT=aria.utils.Array.extractValuesFromMap(a.$texts)),m.RES=n,m.JS=o;if(g!="aria.core.JsObject"){var q=a.$extendsType||"JS";if(q!=="JS"&&q!=="TPL"&&q!=="TML"&&q!=="CSS"&&q!=="TXT")return Aria.$logError(Aria.INVALID_EXTENDSTYPE,[i]);m[q]?m[q].push(g):m[q]=[g]}l=e.loadClassDependencies(j,m,{fn:Aria.loadClass,scope:Aria,args:j})}l&&this.loadClass(j,j)},Aria.interfaceDefinition=function(a){var c=a.$classpath;if(!b(c,"interfaceDefinition"))return;a.$events==null&&(a.$events={});var d=!0;e&&(d=e.loadClassDependencies(c,{JS:a.$extends?[a.$extends]:[]},{fn:aria.core.Interfaces.loadInterface,scope:aria.core.Interfaces,args:a})),d&&aria.core.Interfaces.loadInterface(a)},Aria.copyObject=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])};var r=Aria.$global.navigator,s=r?r.userAgent.toLowerCase().indexOf("msie")!=-1:!1;Aria.loadClass=function(a,c){c||(c=a);if(!b(c,"loadClass"))return;var d=this.$classDefinitions[a];if(!d)return Aria.$logError(Aria.INVALID_DEFCLASSPATH,[a]);var f=d.$prototype,g=d.$statics,h=d.$events,k=d.$beans,n=d.$resources,q=d.$texts,r=d.$implements,t="",u=c,v=c.lastIndexOf(".");v>-1&&(t=c.slice(0,v),u=c.slice(v+1));var w=Aria.nspace(t),x=null;if(d.$extends){if(!b(d.$extends,"parentClass"))return o(d.$classpath);x=Aria.getClassRef(d.$extends);if(!x)return o(d.$classpath,Aria.BASE_CLASS_UNDEFINED,[d.$classpath,d.$extends]);if(!x.classDefinition)return o(d.$classpath,Aria.WRONG_BASE_CLASS,[d.$classpath,d.$extends]);if(x.classDefinition.$singleton)return o(d.$classpath,Aria.CANNOT_EXTEND_SINGLETON,[d.$classpath,d.$extends])}var y;x?y=new x.classDefinition.$noargConstructor:y={},y.$classpath=d.$classpath,y.$class=d.$class,y.$package=d.$package;var z={};y.$resources?(z=y.$resources,y.$resources={},Aria.copyObject(z,y.$resources),Aria.copyObject(n,y.$resources)):y.$resources=d.$resources;var A={};y.$texts?(A=y.$texts,y.$texts={},Aria.copyObject(A,y.$texts),Aria.copyObject(q,y.$texts)):y.$texts=d.$texts,d.$css&&(y.$css=d.$css);if(f){typeof f=="function"&&(f=f.apply({}),f||(Aria.$logError(Aria.FUNCTION_PROTOTYPE_RETURN_NULL,[c]),f={}),Aria.copyObject(f,d.$prototype));for(var B in f)f.hasOwnProperty(B)&&B!="$init"&&(y[B]=f[B]);s&&(f.hasOwnProperty("toString")&&(y.toString=f.toString),f.hasOwnProperty("valueOf")&&(y.valueOf=f.valueOf))}var C={};if(n)for(var B in n)n.hasOwnProperty(B)&&(y[B]&&!z[B]?Aria.$logError(Aria.RESOURCES_HANDLE_CONFLICT,[B,c]):n[B].provider!=null?(C[B]=n[B],y[B]=Aria.getClassInstance(n[B].provider),y[B].getData=function(a){return function(){return a.__getData(u)}}(y[B]),y[B].__refName=B):y[B]=Aria.getClassRef(n[B]));if(q)for(var B in q)q.hasOwnProperty(B)&&(y[B]&&!A[B]?Aria.$logError(Aria.TEXT_TEMPLATE_HANDLE_CONFLICT,[B,c]):y[B]=Aria.getClassRef(q[B]));g&&Aria.copyObject(g,y),!k,y.$events={},x&&p(y.$events,x.prototype.$events,y.$classpath);if(r)if(aria.utils.Type.isArray(r)){for(var B=0,D=r.length;B<D;B++)if(!aria.core.Interfaces.applyInterface(r[B],y))return e.notifyClassLoadError(y.$classpath)}else o(d.$classpath,Aria.INVALID_INTERFACES,[d.$classpath]);y.$interfaces||(y.$interfaces={}),p(y.$events,h,y.$classpath);var E=m(d,x);E&&(y.$destructor=E);var F="$"+d.$class;if(y[F]!=null)return o(d.$classpath,Aria.DUPLICATE_CLASSNAME,d.$class);y[F]=y;var G=l(d,x);G.prototype=y,x&&(G.superclass=x.prototype),y.constructor=G,d.$noargConstructor.prototype=y,d.$singleton?w[u]=new G:(g&&Aria.copyObject(g,G),w[u]=G),w[u].classDefinition=d,Aria.$classes.push(w[u]);for(var B in C)if(C.hasOwnProperty(B)){var H=C[B];H.hasOwnProperty("handler")&&y[B].setHandler(H.handler),H.hasOwnProperty("resources")&&y[B].setResources(H.resources),H.hasOwnProperty("onLoad")?y[B].fetchData({fn:H.onLoad,scope:y},u):j.push({ref:B,prot:y[B]})}i[u]={def:d,p:y,ns:w},this.loadSyncProviders(u)},Aria.loadSyncProviders=function(a){if(j.length>0){var b=j.pop();b.prot.fetchData({fn:this.loadSyncProviders,scope:this,args:{calledback:!0}},a)}else{var c=a,d=i[c].def,f=i[c].p,g=i[c].ns,h=d.$prototype;h&&h.$init&&h.$init(f,d),d.$onload&&d.$onload.call(f,g[c]),e?e.notifyClassLoad(d.$classpath):d.$classpath=="aria.core.ClassMgr"&&(e=aria.core.ClassMgr),i[c]=null}},Aria.load=function(a){var b=new aria.core.MultiLoader(a);b.load()},Aria.beanDefinitions=function(a){aria.core.JsonValidator.beanDefinitions(a)},Aria.setRootDim=function(a){Aria.load({classes:["aria.templates.Layout"],oncomplete:{fn:n,args:a}})},Aria.loadTemplate=function(a,b){aria.core.TplClassLoader.loadTemplate(a,b)},Aria.disposeTemplate=function(a){return aria.core.TplClassLoader.disposeTemplate(a)},Aria.resourcesDefinition=function(a){var b=Aria.getClassRef(a.$classpath);if(b){var c=b.classDefinition.$prototype;aria.utils.Json.inject(a.$resources,c,!0);for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);e&&e.notifyClassLoad(a.$classpath)}else Aria.classDefinition({$classpath:a.$classpath,$singleton:!0,$constructor:function(){},$prototype:a.$resources})},Aria.copyGlobals=function(a){a.Aria=Aria;var b=Aria.$global,c=Aria.$classes,d={};for(var e=0,f=c.length;e<f;e++){var g=c[e];if(g){var h=g.$classpath;if(!h){var i=g.classDefinition||g.interfaceDefinition;i&&(h=i.$classpath)}if(h){var j=h.indexOf("."),k=j>-1?h.substring(0,j):h;a[k]=b[k]}}}};if(Aria.$frameworkWindow){if(Aria.rootFolderPath==null){var t,u,v;u=Aria.$frameworkWindow.document.getElementsByTagName("script"),t=u[u.length-1],u=null,v=t.src;var w=v.replace(/aria\/[^\/]*$/,"");w!=v;if(w==""){var x=Aria.$frameworkWindow.location;w=x.protocol+"//"+x.host+"/";var y=x.pathname;y=y.match(/[\/\w\.\-]+\//gi),y?y=y[0]:y="",w+=y}Aria.rootFolderPath=w}if(Aria.rootFolderPath=="/"){var z=Aria.$frameworkWindow.location;Aria.rootFolderPath=z.protocol+"//"+z.host+"/"}}Aria.empty=function(){},Aria.returnTrue=function(){return!0},Aria.returnFalse=function(){return!1}})(),Aria.eval=function(srcJS,srcURL,evalContext){return srcURL&&(srcJS=[srcJS,"\n//@ sourceURL=",Aria.rootFolderPath,srcURL,"\n"].join("")),eval(srcJS)};
(function(){var a=Aria.FRAMEWORK_PREFIX+"isDisposed",b=function(a,b,c,d,e,f){if(a==null)return;var g=a[b];if(g){var h=g.length,i=!1,j=null,k;for(var l=0;l<h;l++){k=g[l],i=(!e||k.src==e)&&(!c||c==k.scope)&&(!d||d==k.fn);if(i){k.removed=!0,g.splice(l,1);if(f)break;l--,h--}}g.length==0&&(a[b]=null,delete a[b])}},c=function(a,b,e){if(e>=b.nbInterceptors)return this[b.method].apply(this,a);var f=b.interceptors[e];if(f.removed)return c.call(this,g.args,b,e+1);var g={step:"CallBegin",method:b.method,args:a,cancelDefault:!1,returnValue:null},h=b.asyncCbParam;if(h!=null){var i={fn:d,scope:this,args:{info:g,interc:f,origCb:a[h]}};a[h]=i,a.length<=h&&(a.length=h+1),g.callback=i}return this.$callback(f,g),g.cancelDefault||(g.returnValue=c.call(this,g.args,b,e+1),g.step="CallEnd",delete g.cancelDefault,this.$callback(f,g)),g.returnValue},d=function(a,b){var c=b.interc;if(c.removed)return this.$callback(b.origCb,a);var d=b.info;return d.step="Callback",d.callback=b.origCb,d.callbackResult=a,d.cancelDefault=!1,d.returnValue=null,this.$callback(c,d),d.cancelDefault?d.returnValue:this.$callback(b.origCb,d.callbackResult)};Aria.classDefinition({$classpath:"aria.core.JsObject",$constructor:function(){},$destructor:function(){this[a]=!0},$statics:{UNDECLARED_EVENT:"undeclared event name: %1",MISSING_SCOPE:"scope property is mandatory when adding or removing a listener (event: %1)",INTERFACE_NOT_SUPPORTED:"The '%1' interface is not supported on this object (of type '%2').",ASSERT_FAILURE:"Assert #%1 failed in %2",CALLBACK_ERROR:"An error occured while processing a callback function: \ncalling class: %1\ncalled class: %2"},$beans:{Callback:{$type:"json:Object",$description:"Structure describing the function to call-back",$properties:{fn:{$type:"json:FunctionRef",$description:"Function to call back - note: will also be called in case of error or failure"},scope:{$type:"json:ObjectRef",$description:"Reference to the object that should be referred as 'this' in the callback function"},args:{$type:"json:Object",$description:"Optional object passed as argument of the callback function - allows to pass some contextual state information"}}}},$prototype:{$init:function(a,b,c){a.$on=a.$addListeners},$assert:function(a,b){return b?!0:(this.$logError(this.ASSERT_FAILURE,[a,this.$classpath]),!1)},$dispose:function(){this.$destructor(),this._listeners&&(this._listeners=null,delete this._listeners),this.__$interceptors&&(this.__$interceptors=null,delete this.__$interceptors),this.__$interfaces&&aria.core.Interfaces.disposeInterfaces(this)},$logTimestamp:function(){},$startMeasure:function(){},$stopMeasure:function(){},$logDebug:function(a,b,c){return""},$logInfo:function(a,b,c){return""},$logWarn:function(a,b,c){return""},$logError:function(a,b,c){return""},$callback:function(a,b,c){if(!a)return;c==null&&(c=this.CALLBACK_ERROR);var d=a.scope,e;d=d?d:this,a.fn?e=a.fn:e=a,typeof e=="string"&&(e=d[e]);try{return e.call(d,b,a.args)}catch(f){this.$logError(c,[this.$classpath,d.$classpath],f)}},$normCallback:function(a){var b=a.scope,c;return b=b?b:this,a.fn?c=a.fn:c=a,typeof c=="string"&&(c=b[c]),{fn:c,scope:b,args:a.args}},$alert:function(){var a=[],b;a.push("## "+this.$classpath+" ## ");for(var c in this)this.hasOwnProperty(c)&&(b=typeof this[c],b=="object"||b=="function"?a.push(c+=":["+b+"]"):b=="string"?a.push(c+=':"'+this[c]+'"'):a.push(c+=":"+this[c]));Aria.$window.alert(a.join("\n")),a=null},toString:function(){return"["+this.$classpath+"]"},$interface:function(a){return aria.core.Interfaces.getInterface(this,a)},$addInterceptor:function(a,b){var c=this.$interfaces[a];if(!c){this.$logError(this.INTERFACE_NOT_SUPPORTED,[a,this.$classpath]);return}b=this.$normCallback(b);var d=this.__$interceptors;d==null&&(d={},this.__$interceptors=d);var e=c.prototype.$interfaces;for(var f in e)if(e.hasOwnProperty(f)){var g=d[f];g?g.push(b):d[f]=[b]}},$removeInterceptors:function(a,c,d){var e=this.$interfaces[a],f=this.__$interceptors;if(!e||!f)return;var g=e.prototype.$interfaces;for(var h in g)g.hasOwnProperty(h)&&b(f,h,c,d)},$call:function(a,b,d,e){var f;return this.__$interceptors==null||(f=this.__$interceptors[a])==null?this[b].apply(this,d):c.call(this,d,{interceptors:f,nbInterceptors:f.length,method:b,asyncCbParam:e},0)},$addListeners:function(a,b){var c=a.scope?a.scope:null,d=b?b:this,e;for(var f in a){if(!a.hasOwnProperty(f))continue;e=a[f];if(f=="scope")continue;if(f!="*"&&d.$events[f]==null){this.$logError(this.UNDECLARED_EVENT,f,d.$classpath);continue}if(!e.fn){if(!c){this.$logError(this.MISSING_SCOPE,f);continue}e={fn:e,scope:c,once:a[f].listenOnce}}else{e={fn:e.fn,scope:e.scope,args:e.args,once:a[f].listenOnce},e.scope||(e.scope=c);if(!e.scope){this.$logError(this.MISSING_SCOPE,f);continue}}this._listeners==null?(this._listeners={},this._listeners[f]=[]):this._listeners[f]==null&&(this._listeners[f]=[]),e.src=d,this._listeners[f].push(e)}c=e=f=null},$removeListeners:function(a,c){if(this._listeners==null)return;var d=a.scope?a.scope:null,e;for(var f in a){if(!a.hasOwnProperty(f))continue;if(f=="scope")continue;if(this._listeners[f]){var g=a[f];if(typeof g=="function"){if(d==null){this.$logError(this.MISSING_SCOPE,f);continue}b(this._listeners,f,d,g,c)}else{g.scope==null&&(g.scope=d);if(g.scope==null){this.$logError(this.MISSING_SCOPE,f);continue}b(this._listeners,f,g.scope,g.fn,c,g.firstOnly)}}}d=e=g=null},$unregisterListeners:function(a,c){if(this._listeners==null)return;if(a==null&&c==null)for(var d in this._listeners){if(!this._listeners.hasOwnProperty(d))continue;this._listeners[d]=null,delete this._listeners[d]}else for(var d in this._listeners){if(!this._listeners.hasOwnProperty(d))continue;b(this._listeners,d,a,null,c)}d=null},$onOnce:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(a[c].listenOnce=!0);this.$addListeners(a,b)},$raiseEvent:function(a){if(this._listeners==null)return;var b="",c=!1;typeof a=="string"?b=a:(b=a.name,c=!0);if(b==null||this.$events[b]==null)this.$logError(this.UNDECLARED_EVENT,[b,this.$classpath]);else{var d=[b,"*"],e=null,f=this._listeners;for(var g=0;g<2;g++){var h=f[d[g]];if(h){e||(e=c?a:{},e.name=b),h=h.slice(0);var i=h.length,j,k;for(var l=0;i>l;l++){j=h[l],k=j.src;if(!j.removed&&(g==0||k.$events[b]!=null)){e.src=k;if(j.once){delete j.once;var m={};m[e.name]=j,this.$removeListeners(m)}this.$callback(j,e)}}e.src=null}}f=h=i=null}}}})})();
Aria.classDefinition({$classpath:"aria.utils.Type",$singleton:!0,$constructor:function(){},$prototype:{isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isString:function(a){return typeof a=="string"?!0:Object.prototype.toString.apply(a)==="[object String]"},isRegExp:function(a){return Object.prototype.toString.apply(a)==="[object RegExp]"},isNumber:function(a){return typeof a=="number"?!0:Object.prototype.toString.apply(a)==="[object Number]"},isDate:function(a){return Object.prototype.toString.apply(a)==="[object Date]"},isBoolean:function(a){return a===!0||a===!1},isHTMLElement:function(a){if(a){var b=a.nodeName;return a===Aria.$window||aria.utils.Type.isString(b)||a===Aria.$frameworkWindow}return!1},isObject:function(a){return a?Object.prototype.toString.apply(a)==="[object Object]":!1},isInstanceOf:function(a,b){var c=Aria.getClassRef(b);return c==null?!1:a instanceof c},isFunction:function(a){return Object.prototype.toString.apply(a)==="[object Function]"},isContainer:function(a){return(this.isObject(a)||this.isArray(a))&&!(a instanceof aria.core.JsObject)}}});
Aria.classDefinition({$classpath:"aria.core.IO",$singleton:!0,$events:{request:{description:"raised when a request is sent to the server",properties:{req:"{Object} the request object. It is the parameter of asyncRequest, completed with the following properties:\nid: {Integer} the id of the request; the first request after Aria is loaded has id 0, and then ids are given sequentially\nrequestSize: {Integer} the size of the message in bytes (currently the size of the POST data, 0 for GET requests)"}},response:{description:"raised when a request process is done (can be an error)",properties:{req:"{Object} the request object. It is the same object as the one received in the request event, completed with the following properties:\nresponseSize:{Integer} the size of the response in bytes\n\nbeginDownload:{Integer} the time at which the download started\nendDownload:{Integer} the time at which the download ended\ndownloadTime:{Integer} the download duration in ms (= endDownload-beginDownload)\nres: {Object} the response object given to the asyncRequest callback method (with url, status, error and responseText properties)"}},startEvent:{description:"raised when an XDR transaction starts",properties:{o:"{Object} The connection object"}},abortEvent:{description:"raised when an XDR transaction is aborted (after a timeout)",properties:{o:"{Object} The connection object"}}},$statics:{COMM_CODE:0,COMM_ERROR:"communication failure",ABORT_CODE:-1,ABORT_ERROR:"transaction aborted",MISSING_IO_CALLBACK:"Missing callback in IO call - Please check\nurl: %1",IO_CALLBACK_ERROR:"Error in IO callback handling on url: %1",IO_REQUEST_FAILED:"Invalid Request: \nurl: %1\nerror: %2",JSON_PARSING_ERROR:"Response text could not be evaluated as JSON.",MISSING_FORM:"Missing form id or form object in asyncFormSubmit call - Please check the bean: aria.core.CfgBeans.IOAsyncRequestCfg."},$constructor:function(){this.pendingRequests={},this.nbRequests=0,this.nbOKResponses=0,this.nbKOResponses=0,this.trafficUp=0,this.trafficDown=0,this.defaultTimeout=6e4,this._uriScheme=/^([\w\+\.\-]+:)(?:\/\/)?(.*)/,this._uriLocal=/^(?:file):$/,this.useXHRHeader=!0,this.defaultXHRHeader="XMLHttpRequest",this._defaultHeaders={},this._hasDefaultHeaders=!1,this._httpHeaders={},this._hasHTTPHeaders=!1,this.useDefaultPostHeader=!0,this.defaultPostHeader="application/x-www-form-urlencoded; charset=UTF-8",this._pollingInterval=50,this._poll={},this._timeOut={},this.__sameDomain="aria.core.transport.XHR",this.__crossDomain="aria.core.transport.XDR",this.__jsonp="aria.core.transport.JsonP",this.__local="aria.core.transport.Local",this.__iframe="aria.core.transport.IFrame"},$destructor:function(){var a;for(a in this._poll)this._poll.hasOwnProperty(a)&&clearInterval(this._poll[a]);for(a in this._timeOut)this._timeOut.hasOwnProperty(a)&&clearInterval(this._timeOut[a]);this._poll=null,this._timeOut=null},$prototype:{asyncRequest:function(a){return this.__normalizeRequest(a),this.pendingRequests[a.id]=a,this._afterRequestFilters(null,a),a.id},asyncFormSubmit:function(a){var b=aria.utils.Type.isString(a.formId)?a.formId:!1,c=aria.utils.Type.isHTMLElement(a.form),d;return!b&&!c?(this.$logError(this.MISSING_FORM),a.callback.onerror.call(a.callback.scope,a)):(c?d=a.form:d=Aria.$window.document.getElementById(a.formId),d?(a.url||(a.url=d.action),a.method||(a.method=d.method),a.form=d,a.formId=d.id,this.asyncRequest(a)):(this.$logError(this.MISSING_FORM),a.callback.onerror.call(a.callback.scope,a)))},_afterRequestFilters:function(a,b){var c=b.id;this.$raiseEvent({name:"request",req:b}),b.beginDownload=(new Date).getTime(),b.requestSize=b.method=="POST"&&b.postData?b.postData.length:0;try{var d={success:this._onsuccess,failure:this._onfailure,timeout:b.timeout,reqId:b.id,scope:this};this._prepareTransport({req:b,cb:d,uri:b.url})}catch(e){aria.core.Timer.addCallback({fn:this._onfailure,scope:this,delay:10,args:{isInternalError:!0,reqId:b.id,errDescription:e.description||e.message||e.name+e.number}})}return b.id},__normalizeRequest:function(a){a.id=this.nbRequests++,a.timeout==null&&(a.timeout=a.callback==null||a.callback.timeout==null?this.defaultTimeout:a.callback.timeout),a.method?a.method=a.method.toUpperCase():a.method="GET",a.method!=="POST"&&a.method!=="GET"&&(this.$logWarn("The request method %1 is invalid, will use GET instead.",[a.method]),a.method="GET")},_prepareTransport:function(a){var b=a.req,c=b.id,d;b.jsonp?(a.transportCP=this.__jsonp,b.evalCb="_jsonp"+c,this[b.evalCb]=function(a){this._onJsonPLoad(c,a)},a.uri+=(/\?/.test(a.uri)?"&":"?")+b.jsonp+"=aria.core.IO."+b.evalCb,this._timeOut[c]=setTimeout(function(){aria.core.IO.abort(c,a.cb,!0)},b.timeout)):aria.utils.Type.isHTMLElement(b.form)?(a.transportCP=this.__iframe,this._timeOut[c]=setTimeout(function(){aria.core.IO.abort({reqId:c,conn:{status:-1}},a.cb,!0)},b.timeout)):a.transportCP=this._getTransport(a.uri,Aria.$frameworkWindow?Aria.$frameworkWindow.location:null),a.transportInstance=Aria.getClassRef(a.transportCP),a.transportInstance==null?Aria.load({classes:[a.transportCP],oncomplete:{fn:this._asyncRequest,args:a,scope:this}}):this._asyncRequest(a)},_asyncRequest:function(a){var b=a.req,c=a.cb,d=b.id,e=b.method,f=a.transportInstance||Aria.getClassRef(a.transportCP),g=f.$interface("aria.core.transport.ITransports");if(!f.isReady)return g.init(d);this.trafficUp+=b.requestSize,this.useXHRHeader&&(this._defaultHeaders["X-Requested-With"]||this._initHeader("X-Requested-With",this.defaultXHRHeader,!0)),e=="POST"&&this.useDefaultPostHeader&&this._initHeader("Content-Type",this.defaultPostHeader),g.request(d,e,a.uri,c,b.postData,b.form)},_getTransport:function(a,b){var c=this._uriScheme.exec(a.toLowerCase());if(c&&b){var d=c[1],e=c[2];if(this._uriLocal.test(d))return this.__local;if(d!=b.protocol||e.indexOf(b.host)!==0)return this.__crossDomain}return this.__sameDomain},reissue:function(a){var b=this.pendingRequests[a];if(b)return delete this.pendingRequests[a],this.asyncRequest(b)},_removeTimeOut:function(a){clearInterval(this._poll[a]),clearTimeout(this._timeOut[a]),delete this._poll[a],delete this._timeOut[a]},_onsuccess:function(a){var b=this.pendingRequests[a.reqId];this.$assert(658,!!b),delete this.pendingRequests[a.reqId],this._removeTimeOut(a.reqId);var c={url:b.url,status:a.status,responseText:a.responseText||"",responseXML:a.responseXML,responseJSON:a.responseJSON,error:null};b.res=c,b.endDownload=(new Date).getTime(),b.downloadTime=b.endDownload-b.beginDownload,b.responseSize=c.responseText.length,this.trafficDown+=b.responseSize,this.nbOKResponses++,this.$raiseEvent({name:"response",req:b}),this._afterResponseFilters(null,b)},_afterResponseFilters:function(a,b){var c=b.res,d=b.callback;if(!d)this.$logError(this.MISSING_IO_CALLBACK,[c.url]);else if(c.error!=null){c.responseText="",c.responseXML=null,c.responseJSON=null;if(d.onerror==null)this.$logError(this.IO_REQUEST_FAILED,[c.error,c.url]);else{var e=d.onerrorScope;e||(e=d.scope);try{d.onerror.call(e,c,d.args)}catch(f){this.$logError(this.IO_CALLBACK_ERROR,[c.url],f)}}}else b.expectedResponseType&&(b.expectedResponseType=="text"?!c.responseText&&c.responseJSON!=null&&(aria.utils.Type.isString(c.responseJSON)?c.responseText=c.responseJSON:c.responseText=aria.utils.Json.convertToJsonString(c.responseJSON)):b.expectedResponseType=="json"&&c.responseJSON==null&&c.responseText!=null&&(c.responseJSON=aria.utils.Json.load(c.responseText,this,this.JSON_PARSING_ERROR))),d.fn.call(d.scope,c,d.args);b=d=null},_onfailure:function(a){var b=this.pendingRequests[a.reqId];this.$assert(539,!!b),delete this.pendingRequests[b.id],this._removeTimeOut(b.id);var c={url:b.url,status:"",responseText:"",responseXML:null,responseJSON:null,error:""},d=null,e=null;a.isInternalError?c.error=a.errDescription:(c.status=a.status,c.error=a.statusText),b.res=c,b.endDownload=(new Date).getTime(),b.downloadTime=b.endDownload-b.beginDownload,b.responseSize=a.responseText?a.responseText.length:0,this.trafficDown+=b.responseSize,this.nbKOResponses++,this.$raiseEvent({name:"response",req:b}),this._afterResponseFilters(null,b)},_initHeader:function(a,b,c){var d=c?this._defaultHeaders:this._httpHeaders;d[a]=b,c?this._hasDefaultHeaders=!0:this._hasHTTPHeaders=!0},setHeaders:function(a){var b;if(this._hasDefaultHeaders)for(b in this._defaultHeaders)this._defaultHeaders.hasOwnProperty(b)&&a.setRequestHeader(b,this._defaultHeaders[b]);if(this._hasHTTPHeaders){for(b in this._httpHeaders)this._httpHeaders.hasOwnProperty(b)&&a.setRequestHeader(b,this._httpHeaders[b]);this._httpHeaders={},this._hasHTTPHeaders=!1}},createExceptionObject:function(a,b,c){var d={tId:a};return b?(d.status=this.ABORT_CODE,d.statusText=this.ABORT_ERROR):(d.status=c||this.COMM_CODE,d.statusText=this.COMM_ERROR),d},updateTransports:function(a){a.sameDomain&&(this.__sameDomain=a.sameDomain),a.crossDomain&&(this.__crossDomain=a.crossDomain),a.jsonp&&(this.__jsonp=a.jsonp),a.local&&(this.__local=a.local),a.iframe&&(this.__iframe=a.iframe)},getTransports:function(){return{sameDomain:this.__sameDomain,crossDomain:this.__crossDomain,jsonp:this.__jsonp,local:this.__local,iframe:this.__iframe}},_handleTransactionResponse:function(a,b,c){var d,e,f,g=a.response&&a.response.statusText==="xdr:success",h=a.response&&a.response.statusText==="xdr:failure";a.xdr&&c&&(h=!0,c=!1);try{f=a.conn.status,g||f?d=f||200:h&&!c?d=0:!f&&a.conn.responseText?d=200:f==1223?d=204:d=13030}catch(i){d=13030}!c&&d>=200&&d<300?(e=a.xdr?a.response:this._createResponseObject(a,b,d),b&&b.success&&(b.scope?b.success.apply(b.scope,[e]):b.success(e))):(e=this.createExceptionObject(a.transaction,c,d),e.reqId=b.reqId,b&&b.failure&&(b.scope?b.failure.apply(b.scope,[e]):b.failure(e))),this._releaseObject(a),e=null},_createResponseObject:function(a,b,c){var d={},e={},f,g,h,i;g=a.conn.getAllResponseHeaders();if(g){h=g.split("\n");for(f=0;f<h.length;f++)i=h[f].indexOf(":"),i!=-1&&(e[h[f].substring(0,i)]=this._trim(h[f].substring(i+2)))}return d.transaction=a.transaction,d.status=c,d.statusText=a.conn.status==1223?"No Content":a.conn.statusText,d.getResponseHeader=e,d.getAllResponseHeaders=g,d.responseText=a.conn.responseText,d.responseXML=a.conn.responseXML,b&&(d.reqId=b.reqId),d},_releaseObject:function(a){a&&a.conn&&(a.conn=null,a=null)},_trim:function(a){return a.replace(/^\s+|\s+$/g,"")},abort:function(a,b,c){var d=!1;if(!a)return d;var e;return a.conn?a.xhr&&(d=!0,e=a.transaction,this.__isCallInProgress(a)&&a.conn.abort(),clearInterval(this._poll[e]),delete this._poll[e]):(d=!0,e=a,a={transaction:e}),c&&(clearTimeout(this._timeOut[e]),delete this._timeOut[e]),d===!0&&(this.$raiseEvent({name:"abortEvent",o:a}),this._handleTransactionResponse(a,b,!0)),d},__isCallInProgress:function(a){return a=a||{},a.xhr&&a.conn?a.conn.readyState!==4&&a.conn.readyState!==0:a&&a.conn?a.conn.__isCallInProgress(a.tId):!1},jsonp:function(a){return a.jsonp||(a.jsonp="callback"),a.expectedResponseType||(a.expectedResponseType="json"),this.asyncRequest(a)},_onJsonPLoad:function(a,b){var c=this.pendingRequests[a];this.$assert(992,!!c),this._removeTimeOut(a),delete this[c.evalCb],this._onsuccess({reqId:a,status:200,responseJSON:b})}}});
Aria.classDefinition({$classpath:"aria.core.FileLoader",$events:{fileReady:{description:"notifies that the file associated to the loader is ready for use or that an error occured",properties:{logicalPaths:"{Array} expected logical paths associated to the file (a multipart file may contain extra files, which were not asked for)",url:"{String} URL used to retrieve the file (may be the URL of a multipart file)",downloadFailed:"{boolean} if true, no path in logicalPaths could be retrieved successfully (maybe other logical paths)"}},complete:{description:"notifies that the file loader process is done and that it can be disposed (i.e. fileReady listeners have already been called when this event is raised)"}},$constructor:function(a){this._url=a,this._urlItm=aria.core.Cache.getItem("urls",a,!0),this._logicalPaths=[],this._isProcessing=!1,this.status=aria.core.Cache.STATUS_NEW},$statics:{INVALID_MULTIPART:"Error in multipart structure of %1, part %2",LPNOTFOUND_MULTIPART:"The expected logical path %1 was not found in multipart %2",EXPECTED_MULTIPART:"The expected multipart structure was not found in %1."},$prototype:{_multiPartHeader:/^(\/\*[\s\S]*?\*\/\s*\r?\n)?\/\/\*\*\*MULTI-PART(\r?\n[^\n]+\n)/,_logicalPathHeader:/^\/\/LOGICAL-PATH:([^\s]+)$/,loadFile:function(){if(this._isProcessing)return;this.$assert(33,this._logicalPaths.length>0),this._isProcessing=!0,aria.core.IO.asyncRequest({sender:{classpath:this.$classpath,logicalPaths:this._logicalPaths},url:aria.core.DownloadMgr.getURLWithTimestamp(this._url),callback:{fn:this._onFileReceive,onerror:this._onFileReceive,scope:this},expectedResponseType:"text"})},addLogicalPath:function(a){var b=this._logicalPaths;for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return!1;return this._logicalPaths.push(a),!0},getLogicalPaths:function(){return this._logicalPaths},getURL:function(){return this._url},_onFileReceive:function(a){var b=a.status!="200";this.$assert(79,this._logicalPaths.length>0);if(!b){var c=this._multiPartHeader.exec(a.responseText);if(c!=null){var d=a.responseText.split(c[2]),e=d.length,f={},g;for(var h=1;h<e;h+=2){g=this._logicalPathHeader.exec(d[h]),g!=null&&(g=g[1]);var i=d[h+1];if(g==null||i==null){this.$logError(this.INVALID_MULTIPART,[a.url,(h+1)/2]);continue}h+3>e&&(this._urlItm.status=aria.core.Cache.STATUS_AVAILABLE),f[g]=1,aria.core.DownloadMgr.loadFileContent(g,i,i==null)}var j=0;for(var h=0;h<this._logicalPaths.length;h++)g=this._logicalPaths[h],f[g]!=1&&(this.$logError(this.LPNOTFOUND_MULTIPART,[g,a.url]),aria.core.DownloadMgr.loadFileContent(g,null,!0),j++);j==this._logicalPaths.length&&(b=!0)}else this._urlItm.status=aria.core.Cache.STATUS_AVAILABLE,this._logicalPaths.length==1?aria.core.DownloadMgr.loadFileContent(this._logicalPaths[0],a.responseText,!1):(this.$logError(this.EXPECTED_MULTIPART,a.url),b=!0)}if(b&&c==null)for(var h=0;h<this._logicalPaths.length;h++)aria.core.DownloadMgr.loadFileContent(this._logicalPaths[h],a.responseText,!0);this.$raiseEvent({name:"fileReady",logicalPaths:this._logicalPaths,url:this._url,downloadFailed:b}),this._isProcessing=!1,this.$raiseEvent({name:"complete"})}}});
Aria.classDefinition({$classpath:"aria.core.DownloadMgr",$singleton:!0,$dependencies:["aria.utils.Type","aria.utils.Json"],$constructor:function(){this._cache=null,this._urlMap={},this._rootMap={},this._jsonUtils=aria.utils.Json,this._typeUtils=aria.utils.Type,this._timestampURL={}},$destructor:function(){this._cache&&this._cache.$dispose(),this._urlMap=null,this._rootMap=null,this._jsonUtils=null,this._timestampURL=null},$prototype:{updateUrlMap:function(a){this._jsonUtils.inject(a,this._urlMap,!0)},updateRootMap:function(a){this._jsonUtils.inject(a,this._rootMap,!0)},enableURLTimestamp:function(a,b){b!==!1?this._timestampURL[a]=!0:delete this._timestampURL[a]},getURLWithTimestamp:function(a,b){if(b||this._timestampURL[a]){var c=(new Date).getTime();return a.indexOf("?")!=-1?a+"&timestamp="+c:a+"?timestamp="+c}return a},loadFile:function(a,b,c){this._cache||(this._cache=aria.core.Cache),this.$assert(34,this._cache),this.$assert(35,b.scope),this.$assert(36,b.fn);var d=this._cache,e=d.getItem("files",a,!0),f=e.status;if(f==d.STATUS_AVAILABLE||f==d.STATUS_ERROR){var g={name:"fileReady",src:this,logicalPaths:[a],url:null};return this.$callback(b,g)}var h=e.loader;if(!h){this.$assert(63,aria.core.FileLoader);var i;c&&c.fullLogicalPath?i=c.fullLogicalPath:i=this.resolveURL(a);var j=d.getItem("urls",i,!0);if(j.status==this._cache.STATUS_AVAILABLE){var g={name:"fileReady",src:this,logicalPaths:[a],url:i,downloadFailed:!0};return this.$callback(b,g)}j.loader?this.$assert(72,j.status==d.STATUS_LOADING):(j.loader=new aria.core.FileLoader(i),j.status=d.STATUS_LOADING,j.loader.$on({complete:this._onFileLoaderComplete,scope:this})),h=j.loader,e.loader=h,i=j=null}h.addLogicalPath(a);var k=b.args?b.args:null;h.$on({fileReady:{fn:b.fn,args:k,scope:b.scope}}),h.loadFile(),k=h=null},_extractTarget:function(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];if(!this._typeUtils.isObject(a)||this._typeUtils.isInstanceOf(a,"aria.core.JsObject"))break;if(!a[f]){c?a["*"]&&d==e-1?a=a["*"]:a=a["**"]:a=a["*"];break}a=a[f]}return{node:a,index:d}},resolveURL:function(a,b){var c=a,d=Aria.rootFolderPath,e=a.lastIndexOf("."),f=a.substring(0,e),g=this._urlMap,h=this._rootMap,i=f.split("/"),j;return b!==!0&&(j=this._extractTarget(g,i,!0),g=j.node,this._typeUtils.isString(g)?c=g:this._typeUtils.isInstanceOf(g,"aria.utils.Callback")?c=g.call(a):this._typeUtils.isFunction(g)&&(c=g.call(null,a))),h=this._extractTarget(h,i).node,this._typeUtils.isString(h)?d=h:this._typeUtils.isInstanceOf(h,"aria.utils.Callback")?d=h.call(a):this._typeUtils.isFunction(h)&&(d=h.call(null,a)),d+c},_onFileLoaderComplete:function(a){var b=a.src,c=this._cache,d,e=b.getLogicalPaths();if(e){var f=e.length;for(var g=0;f>g;g++)d=c.getItem("files",e[g],!1),d&&(this.$assert(120,d.loader==b),d.loader=null)}d=c.getItem("urls",b.getURL(),!1),d&&(this.$assert(128,d.loader==b),d.loader=null,d.status=this._cache.STATUS_AVAILABLE),b.$dispose(),b=c=d=e=null},loadFileContent:function(a,b,c){var d=this._cache.getItem("files",a,!0);c?d.status=this._cache.STATUS_ERROR:(d.value=b,d.status=this._cache.STATUS_AVAILABLE),d=null},getFileContent:function(a){var b=this._cache.getItem("files",a,!1);return b&&b.status==this._cache.STATUS_AVAILABLE?b.value:null},loadTplFileContent:function(a,b){var c=aria.core.ClassMgr.getBaseLogicalPath(a)+".tpl";this.loadFile(c,{fn:this._onTplFileContentReceive,scope:this,args:{origCb:b}},null)},_onTplFileContentReceive:function(a,b){var c={content:null};a.downloadFailed&&(c.downloadFailed=a.downloadFailed),a.logicalPaths.length>0&&(c.content=this.getFileContent(a.logicalPaths[0])),this.$callback(b.origCb,c)},clearFile:function(a,b){var c=this._cache.content;delete c.files[a];var d=this.resolveURL(a);delete c.urls[d],b&&this.enableURLTimestamp(d,!0)}}});
Aria.classDefinition({$classpath:"aria.core.Cache",$singleton:!0,$destructor:function(){},$statics:{EXTENSION_MAP:{JS:".js",TPL:".tpl",CSS:".tpl.css",TML:".tml",TXT:".tpl.txt",RES:".js"}},$prototype:{content:{},STATUS_NEW:1,STATUS_LOADING:2,STATUS_AVAILABLE:3,STATUS_ERROR:4,getItem:function(a,b,c){c!=1&&(c=!1);var d=null;if(c){this.content[a]==null&&(this.content[a]={});var d=this.content[a][b];d==null&&(d={status:this.STATUS_NEW,value:null},this.content[a][b]=d)}else this.content[a]!=null&&(d=this.content[a][b]);return d},getFilename:function(a){var b=this.getItem("classes",a,!1);if(b)return a.replace(/\./g,"/")+this.EXTENSION_MAP[b.content]}}});
Aria.classDefinition({$classpath:"aria.core.ClassLoader",$events:{classReady:{description:"notifies that all class dependencies (and the ref class if any) have been loaded and are ready to use",properties:{refClasspath:"{String} classpath of the reference class if any"}},classError:{description:"notifies that the class loading process has failed",properties:{refClasspath:"{String} classpath of the reference class if any"}},complete:{description:"notifies that the class loader process is done and that it can be disposed (thus classReady listeners have already been called when this event is raised)",properties:{refClasspath:"{String} classpath of the reference class if any"}}},$constructor:function(a,b){this._refClasspath=a,a&&(this._refLogicalPath=aria.core.ClassMgr.getBaseLogicalPath(a,b)),this._fullLogicalPath=null,this.callback=null,this._mdp=null,this._mdpErrors=!1,this._isLoadingRefDefinition=!1,this._classDefinitionCalled=!1,this.handleError=!0},$statics:{CLASS_LOAD_FAILURE:"Class definition for %1 cannot be loaded.",CLASS_LOAD_ERROR:"Load of class %1 failed",CLASS_LOAD_MISSING_REF:"ClassLoader.loadClassDefinition() cannot be called if no reference classpath is defined.",MISSING_CLASS_DEFINITION:"Error: the definition of class '%2' was not found in logical path '%1' - please check the classpath defined in this file."},$prototype:{loadClassDefinition:function(){if(this._isLoadingRefDefinition)return;this._isLoadingRefDefinition=!0;if(this._refClasspath==null){this.$logError(this.CLASS_LOAD_MISSING_REF);return}aria.core.DownloadMgr.loadFile(this.getRefLogicalPath(),{fn:this._onClassDefinitionReceive,scope:this},{fullLogicalPath:this._fullLogicalPath})},getRefLogicalPath:function(){return this._refLogicalPath},_onClassDefinitionReceive:function(a){var b=this.getRefLogicalPath(),c=aria.core.DownloadMgr.getFileContent(b),d=!1;if(!c)this.handleError&&this.$logError(this.CLASS_LOAD_FAILURE,this._refClasspath),d=!0;else try{this._loadClass(c,b)}catch(e){this.handleError&&this.$logError(this.CLASS_LOAD_ERROR,[this._refClasspath],e),d=!0}d&&aria.core.ClassMgr.notifyClassLoadError(this._refClasspath),b=c=d=null},_loadClass:function(a,b){this.$assert(164,!1)},addDependencies:function(a,b){if(a==0){this._mdpErrors=!0;return}var c=a.length,d,e,f=aria.core.ClassMgr;for(var g=0;c>g;g++)e=a[g],d=f.getClassLoader(e,b),d&&(d.handleError=this.handleError,this._mdp==null&&(this._mdp=[]),this._mdp.push({loader:d,classpath:e,isReady:!1}),d.$on({classReady:this._onMdpClassReady,classError:this._onMdpClassError,scope:this}));c=d=e=f=null},loadDependencies:function(){if(this._mdpErrors)this._onMdpClassError();else{this.$assert(221,this._mdp!=null);var a=this._mdp.length,b;for(var c=0;a>c;c++){var d=this._mdp[c];d.isReady||d.loader.loadClassDefinition();if(!this._mdp)break}}},getCircular:function(a){if(!a)a=this._refClasspath;else if(this._refClasspath==a)return!0;var b;if(this._mdp)for(var c=0,d=this._mdp.length;c<d;c++){b=this._mdp[c].loader.getCircular(a);if(b)return b===!0?this._refClasspath:b}return!1},_onMdpClassReady:function(a){var b=a.refClasspath;this.$assert(283,b!=""),this.$assert(284,this._mdp!=null);var c=this._mdp.length,d,e=!0,f=!1;for(var g=0;c>g;g++){d=this._mdp[g];if(!f&&!d.isReady&&d.classpath==b)f=!0,d.isReady=!0;else if(e)e=d.isReady;else if(f)break}this.$assert(301,f===!0);if(!e)return;this._refClasspath!=null?(this.$assert(286,this.callback!=null),this.callback.fn.call(this.callback.scope,this.callback.args)):(this._mdp=null,this.notifyLoadComplete())},_onMdpClassError:function(a){if(a!=null){var b=a.refClasspath;this.$assert(304,b!="");var c=this._mdp.length,d;for(var e=0;c>e;e++)d=this._mdp[e],d.isReady||d.loader.$unregisterListeners(this)}this._refClasspath!=null?aria.core.ClassMgr.notifyClassLoadError(this._refClasspath):this.notifyLoadError()},notifyLoadError:function(){this.$raiseEvent({name:"classError",refClasspath:this._refClasspath}),this.$raiseEvent({name:"complete",refClasspath:this._refClasspath})},notifyLoadComplete:function(){this.$raiseEvent({name:"classReady",refClasspath:this._refClasspath}),this.$raiseEvent({name:"complete",refClasspath:this._refClasspath})},notifyClassDefinitionCalled:function(){this._classDefinitionCalled=!0}}});
Aria.classDefinition({$classpath:"aria.core.JsClassLoader",$extends:"aria.core.ClassLoader",$constructor:function(){this.$ClassLoader.constructor.apply(this,arguments),this._refLogicalPath+=".js"},$prototype:{_loadClass:function(a,b){Aria.eval(a,b),this._classDefinitionCalled||(this.$logError(this.MISSING_CLASS_DEFINITION,[this.getRefLogicalPath(),this._refClasspath]),aria.core.ClassMgr.notifyClassLoadError(this._refClasspath))}}});
Aria.classDefinition({$classpath:"aria.core.MultiLoader",$constructor:function(a,b){this._autoDispose=b!=0,this._loadDesc=a,this._clsLoader=null},$statics:{MULTILOADER_CB1_ERROR:"Error detected while executing synchronous callback on MultiLoader.",MULTILOADER_CB2_ERROR:"Error detected while executing callback on MultiLoader."},$prototype:{load:function(){var a=aria.core.ClassMgr,b=a.filterMissingDependencies(this._loadDesc.templates),c=a.filterMissingDependencies(this._loadDesc.classes),d=a.filterMissingDependencies(this._loadDesc.resources,"RES"),e=a.filterMissingDependencies(this._loadDesc.css),f=a.filterMissingDependencies(this._loadDesc.tml),g=a.filterMissingDependencies(this._loadDesc.txt);if(b==0||c==0||d==0||e==0||f==0|g==0)this._execCallback(!0,!0);else if(c!=null||b!=null||d!=null||e!=null||f!=null|g!=null){var h=new aria.core.ClassLoader;this._loadDesc.onerror&&this._loadDesc.onerror.override&&(h.handleError=!1),this._clsLoader=h,h.$on({classReady:this._onClassesReady,classError:this._onClassesError,complete:this._onClassLoaderComplete,scope:this}),c!=null&&h.addDependencies(c,"JS"),b!=null&&h.addDependencies(b,"TPL"),d!=null&&h.addDependencies(d,"RES"),e!=null&&h.addDependencies(e,"CSS"),f!=null&&h.addDependencies(f,"TML"),g!=null&&h.addDependencies(g,"TXT"),h.loadDependencies()}else this._execCallback(!0,!1)},_execCallback:function(a,b){var c=this._loadDesc[b?"onerror":"oncomplete"];if(c){typeof c=="function"&&(c={fn:c});var d=c.scope?c.scope:Aria;try{c.fn.call(d,c.args)}catch(e){var f=a?this.MULTILOADER_CB1_ERROR:this.MULTILOADER_CB2_ERROR;this.$logError(f,null,e)}}a&&this._autoDispose&&this.$dispose()},_onClassesReady:function(a){this._execCallback(!1,!1)},_onClassesError:function(a){this._execCallback(!1,!0)},_onClassLoaderComplete:function(a){var b=a.src;this.$assert(90,this._clsLoader==b),this._clsLoader=null,b.$dispose(),this._autoDispose&&this.$dispose()}}});
Aria.classDefinition({$classpath:"aria.core.ClassMgr",$singleton:!0,$events:{classComplete:{description:"notifies that the class loader process is done.",properties:{refClasspath:"{String} classpath of the reference class if any"}}},$constructor:function(){this._cache=null,this._classTypes={JS:aria.core.JsClassLoader,TPL:aria.core.TplClassLoader,RES:aria.core.ResClassLoader,CSS:aria.core.CSSClassLoader,TML:aria.core.TmlClassLoader,TXT:aria.core.TxtClassLoader}},$statics:{CIRCULAR_DEPENDENCY:"Class %1 and %2 have circular dependency"},$prototype:{getBaseLogicalPath:function(a,b){var c=a.split(".");return c.join("/")},notifyClassLoad:function(a){this._cache||(this._cache=aria.core.Cache),this.$assert(1,this._cache);var b=this._cache.getItem("classes",a,!0);b.status=this._cache.STATUS_AVAILABLE,b.loader&&b.loader.notifyLoadComplete();var c=Aria.getClassRef(a);if(c){var d=Aria.getClassRef(a).classDefinition;d&&d.$css&&aria.templates.CSSMgr.registerDependencies(a,d.$css)}},notifyClassLoadError:function(a){this._cache||(this._cache=aria.core.Cache),this.$assert(1,this._cache);var b=this._cache.getItem("classes",a,!0);b.status=this._cache.STATUS_ERROR,b.loader&&b.loader.notifyLoadError()},filterMissingDependencies:function(a,b){if(!a)return null;var c=this._cache,d,e,f=null,g;for(var h=0,i=a.length;h<i;h++){d=a[h],e=c.getItem("classes",d,!0),g=e.status;if(g!=c.STATUS_AVAILABLE){if(g==c.STATUS_ERROR)return!1;g==c.STATUS_NEW&&Aria.getClassRef(d)&&b!="RES"?e.status=c.STATUS_AVAILABLE:(f||(f=[]),f.push(d))}}return f},loadClassDependencies:function(a,b,c){this._cache||(this._cache=aria.core.Cache),this.$assert(2,this._cache),this.$assert(72,c&&c.fn&&c.scope);var d=this._cache,e=this.getClassLoader(a);if(!e){var f=d.getItem("classes",a,!0);f.status=d.STATUS_LOADING,f=null,e=this.getClassLoader(a)}e.notifyClassDefinitionCalled();if(!b)return!0;e.callback=c;var g=!0;for(var h in b)if(b.hasOwnProperty(h)){var i=this.filterMissingDependencies(b[h]);i!=null&&(g=!1,e.addDependencies(i,h))}if(g){var f=d.getItem("classes",a,!0);return f.status=d.STATUS_LOADING,!0}var j=e.getCircular();return j?(this.$logError(this.CIRCULAR_DEPENDENCY,[a,j]),this.notifyClassLoadError(a)):(e.loadDependencies(),!1)},getClassLoader:function(a,b,c){var d=this._cache,e=d.getItem("classes",a,!0),f=e.status;if(f==d.STATUS_AVAILABLE||f==d.STATUS_ERROR)return null;var g=e.loader;if(!g){var h=b!=null?this._classTypes[b]:aria.core.ClassLoader;this.$assert(127,h),g=new h(a,b),e.loader=g,e.content=b,g.$on({complete:this._onClassLoaderComplete,scope:this})}return e.status=d.STATUS_LOADING,g},unloadClass:function(a,b){var c=Aria.getClassRef(a);if(c){var d=Aria.getClassRef(a).classDefinition;d&&d.$css&&aria.templates.CSSMgr.unregisterDependencies(a,d.$css,!0,b)}Aria.dispose(a),Aria.cleanGetClassRefCache(a);var e=aria.core.Cache.getFilename(a);e&&aria.core.DownloadMgr.clearFile(e,b);var f=this._cache.content.classes;delete f[a]},unloadClassesByType:function(a,b){var c=this._cache.content.classes;for(var d in c)if(c.hasOwnProperty(d)&&c[d].content===a){if(b){Aria.dispose(d),Aria.cleanGetClassRefCache(d);var e=aria.core.Cache.getFilename(d);aria.core.DownloadMgr.clearFile(e,!0)}delete c[d]}},_onClassLoaderComplete:function(a){var b=a.refClasspath;this.$assert(4,b);var c=a.src;c.$dispose();var d=aria.core.Cache.getItem("classes",b);d&&(d.loader=null,delete d.loader),this.$raiseEvent({name:"classComplete",refClasspath:b})}}});
(function(){var a=aria.utils.Type,b=Aria.__mergeEvents,c=aria.core.ClassMgr,d=-1,e=function(){return d++,d},f=function(a){var b=1e7*Math.random(),c=""+(b|b);while(a[c])c+="x";return c},g={Function:1,Object:1,Interface:1},h={$type:"Function"},i={$type:"Object"},j={$type:"Object"},k=function(b,c,d){var e;if(a.isFunction(b))return h;if(a.isString(b))e={$type:b};else{if(a.isArray(b))return j;if(!a.isObject(b))return null;b.$type==null?(this.$logWarn("Member '%2' in interface '%1' uses a deprecated way of declaring an object in an interface. Please use {$type:'Object'} instead of {}.",[c,d]),e=i):e=b}var f=e.$type;return g[f]?aria.core.JsonValidator.normalize({json:e,beanName:"aria.core.CfgBeans.ItfMember"+f+"Cfg"})?e:null:null},l=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},m={$interface:function(){},$destructor:function(){},$addListeners:function(){},$removeListeners:function(){},$unregisterListeners:function(){},$on:function(){},toString:function(){return"["+this.$classpath+"]"}},n=function(){};n.prototype=m;var o={protoProperty:!0},p={};p.__proto__=o;var q=p.protoProperty?function(a,b){a.__proto__=b;for(var c in a)a.hasOwnProperty(c)&&delete a[c]}:function(a,b){var c=a.__$linkItfWrappers;if(c&&a.hasOwnProperty("__$linkItfWrappers"))for(var d=0,e=c.length;d<e;d++)q.call(this,c[d],b);for(var d in a)a.hasOwnProperty(d)&&delete a[d],d in a&&(a[d]=b[d]);for(var d in b)a[d]=b[d];delete a.__$linkItfWrappers,b.hasOwnProperty("__$linkItfWrappers")?b.__$linkItfWrappers.push(a):b.__$linkItfWrappers=[a]};o=null,p=null,Aria.classDefinition({$classpath:"aria.core.Interfaces",$singleton:!0,$destructor:function(){},$statics:{INVALID_INTERFACE_MEMBER:"The '%1' interface has a '%2' member, which does not respect the constraints on interface member names. This member will be ignored.",INVALID_INTERFACE_MEMBER_DEF:"Invalid definition for the '%2' member on the '%1' interface. This member will be ignored.",BASE_INTERFACE_UNDEFINED:"Super interface for %1 is undefined (%2)",WRONG_BASE_INTERFACE:"Super interface for %1 is not properly defined: base interfaces (%2) must be defined through Aria.interfaceDefinition.",METHOD_NOT_IMPLEMENTED:"Class '%1' has no implementation of method '%2', required by interface '%3'.",WRONG_INTERFACE:"Interface '%1' declared in the $implements section of class '%2' was not properly defined through Aria.interfaceDefinition."},$prototype:{generateKey:f,linkItfWrappers:q,loadInterface:function(a){var d=a.$classpath,g,h=null;if(a.$extends){h=Aria.getClassRef(a.$extends);if(!h){this.$logError(this.BASE_INTERFACE_UNDEFINED,[d,a.$extends]),c.notifyClassLoadError(d);return}var i=h?h.interfaceDefinition:null;i=i?i.$noargConstructor:null;if(!i){this.$logError(this.WRONG_BASE_INTERFACE,[d,a.$extends]),c.notifyClassLoadError(d);return}g=new i,g.$interfaces=l(h.prototype.$interfaces)}else g=new n,g.$interfaces={};g.$classpath=d;var j="__iid"+e(),o=a.$interface,p=[],q=[],r=[];for(var s in o)if(o.hasOwnProperty(s)){if(!Aria.checkJsVarName(s)||m[s]){this.$logError(this.INVALID_INTERFACE_MEMBER,[d,s]),o[s]=null,delete o[s];continue}var t=k.call(this,o[s],d,s);o[s]=t;if(t!=null)if(t.$type=="Function"){var u=t.$callbackParam;u==null&&(u="null"),p.push("p.",s,"=function(){\nreturn i[this.",j,"].$call('",d,"','",s,"',arguments,",u,");\n}\n")}else t.$type=="Interface"?(q.push("this.",s,"=obj.",s,"?obj.",s,".$interface('",t.$classpath,"'):null;\n"),r.push("this.",s,"=null;\n")):t.$type=="Object"&&(q.push("this.",s,"=obj.",s,";\n"),r.push("this.",s,"=null;\n"));else this.$logError(this.INVALID_INTERFACE_MEMBER_DEF,[d,s]),delete o[s]}g.$events={};var v=!1;h?v=b(g.$events,h.prototype.$events,d):p.push("p.$interface=function(a){\nreturn aria.core.Interfaces.getInterface(i[this.",j,"],a,this);\n};\n"),b(g.$events,a.$events,d)&&!v&&(p.push("p.$addListeners=function(a){\nreturn i[this.",j,"].$addListeners(a,this);\n};\n"),p.push("p.$onOnce=function(a){\nreturn i[this.",j,"].$onOnce(a,this);\n};\n"),p.push("p.$removeListeners=function(a){\nreturn i[this.",j,"].$removeListeners(a,this);\n};\n"),p.push("p.$unregisterListeners=function(a){\nreturn i[this.",j,"].$unregisterListeners(a,this);\n};\n"),p.push("p.$on=p.$addListeners;\n")),p.push("p.$destructor=function(){\n",r.join(""),"i[this.",j,"]=null;\ndelete i[this.",j,"];\nthis.",j,"=null;\n",h?"e.prototype.$destructor.call(this);\n":"","};\n");var w=[],x={g:f,p:g,c:null,e:h};Aria.nspace(d,!0),w.push("var i={};\nvar evalContext=arguments[2];\nvar g=evalContext.g;\nvar p=evalContext.p;\nvar e=evalContext.e;\nevalContext.c=function(obj){\n",h?"e.call(this,obj);\n":"","var k=g(i);\ni[k]=obj;\nthis.",j,"=k;\n",q.join(""),"};\n",p.join(""),"Aria.$global.",d,"=evalContext.c;\n","p=null;\nevalContext=null;\n"),w=w.join(""),Aria.eval(w,d.replace(/\./g,"/")+"-wrapper.js",x);var y=x.c;g.$interfaces[d]=y,y.prototype=g,y.interfaceDefinition=a,y.superInterface=h,a.$noargConstructor=new Function,a.$noargConstructor.prototype=g,Aria.$classes.push(y),c.notifyClassLoad(d)},applyInterface:function(c,d){var e=d.$interfaces;if(e&&e[c])return!0;var f=Aria.getClassRef(c);if(!f.interfaceDefinition)return this.$logError(this.WRONG_INTERFACE,[c,d.$classpath]),!1;if(f.superInterface){if(!this.applyInterface(f.interfaceDefinition.$extends,d))return!1;e=d.$interfaces}d.hasOwnProperty("$interfaces")||(e=l(e),d.$interfaces=e),e[c]=f,b(d.$events,f.interfaceDefinition.$events,d.$classpath);var g=f.interfaceDefinition.$interface;for(var h in g)if(g.hasOwnProperty(h)&&g[h].$type=="Function"&&!a.isFunction(d[h]))return this.$logError(this.METHOD_NOT_IMPLEMENTED,[d.$classpath,h,c]),!1;return!0},getInterface:function(b,c,d){var e,f;a.isFunction(c)?(f=c,e=c.interfaceDefinition.$classpath):a.isString(c)&&(e=c);var g=b.__$interfaces,h;if(d!=null&&!d.$interfaces[e])return this.$logError(this.INTERFACE_NOT_SUPPORTED,[e,d.$classpath]),null;if(g){h=g[e];if(h)return h}if(!b.$interfaces[e])return this.$logError(this.INTERFACE_NOT_SUPPORTED,[e,b.$classpath]),null;if(!f){f=Aria.getClassRef(e);if(!f)return null}return g||(g={},b.__$interfaces=g),h=new f(b),g[e]=h,h},disposeInterfaces:function(a){var b=a.__$interfaces;if(!b)return;for(var c in b)b.hasOwnProperty(c)&&b[c].$destructor&&(b[c].$destructor(),b[c]=null);a.__$interfaces=null}}})})();
Aria.interfaceDefinition({$classpath:"aria.core.transport.ITransports",$interface:{init:function(a){},request:function(a,b,c,d,e){}}});
Aria.classDefinition({$classpath:"aria.core.transport.BaseXHR",$implements:["aria.core.transport.ITransports"],$constructor:function(){this.isReady=!0,this._requestParams={}},$prototype:{init:function(){},_setUp:function(a,b,c,d,e){this._requestParams[a]={reqId:a,method:b,uri:c,callback:d,postData:e}},request:function(a,b,c,d,e){this._setUp(a,b,c,d,e);var f=this._requestParams[a];this.$assert(55,!!f),delete this._requestParams[a];var g=aria.core.IO,h=this._getConnection();return h.open(f.method,f.uri,!0),g.setHeaders(h),this._handleReadyState({conn:h,transaction:f.reqId,xhr:!0},f.callback),h.send(f.postData||null),h},_getConnection:function(){return this._standardXHR()||this._activeX()},_standardXHR:function(){try{var a=Aria.$global.XMLHttpRequest;return new a}catch(b){}},_activeX:function(){try{var a=Aria.$global.ActiveXObject;return new a("Microsoft.XMLHTTP")}catch(b){}},_handleReadyState:function(a,b){var c=aria.core.IO;b&&b.timeout&&(c._timeOut[a.transaction]=setTimeout(function(){var d=a.transaction;c._timeOut[d]&&c.abort(a,b,!0)},b.timeout)),c._poll[a.transaction]=setInterval(function(){if(a.conn&&a.conn.readyState===4){var d=a.transaction;clearInterval(c._poll[d]),clearTimeout(c._timeOut[d]),delete c._poll[d],delete c._timeOut[d],c._handleTransactionResponse(a,b)}},c._pollingInterval)}}});
Aria.classDefinition({$classpath:"aria.core.transport.XHR",$extends:"aria.core.transport.BaseXHR",$singleton:!0,$constructor:function(){this.$BaseXHR.constructor.call(this)},$prototype:{hasCORS:function(){return"withCredentials"in this._standardXHR()}}});
Aria.classDefinition({$classpath:"aria.core.Browser",$singleton:!0,$constructor:function(){var a=Aria.$global.navigator,b=a?a.userAgent.toLowerCase():"";this.ua=b,this.isIE=!1,this.isIE6=!1,this.isIE7=!1,this.isIE8=!1,this.isIE9=!1,this.isOpera=!1,this.isOpera6=!1,this.isOpera8=!1,this.isOpera9=!1,this.isChrome=!1,this.isSafari=!1,this.isGecko=!1,this.isFirefox=!1,this.isNS=!1,this.version="",this.isWindows=!1,this.isMac=!1,this.name="",this.environment="",this.majorVersion="",this.code="",this._init()},$prototype:{toString:function(){return this.name+" "+this.version},_init:function(){var a=this.ua;if(a.indexOf("msie")>-1){this.isIE=!0,this.name="IE";if(/msie[\/\s]((?:\d+\.?)+)/.test(a)){this.version=RegExp.$1;var b=parseInt(this.version);if(b==6)this.isIE6=!0;else if(b>=7){var c;if(Object.defineProperty)try{var d={};Object.defineProperty(d,"a",{get:function(){}}),c=9}catch(e){c=8}else c=7;this["isIE"+c]=!0,c!=b&&(this.version=c+".0")}}}else if(a.indexOf("opera")>-1){this.isOpera=!0,this.name="Opera";if(a.indexOf("opera 6")>-1)this.isOpera6=!0;else if(a.indexOf("opera/9")>-1)this.isOpera9=!0;else if(a.indexOf("opera/8")>-1||a.indexOf("opera 8")>-1)this.isOpera8=!0}else a.indexOf("chrome")>-1?(this.isChrome=!0,this.name="Chrome"):a.indexOf("webkit")>-1?(this.isSafari=!0,this.name="Safari"):(a.indexOf("gecko")>-1&&(this.isGecko=!0),a.indexOf("firefox")>-1&&(this.name="Firefox",this.isFirefox=!0),a.indexOf("netscape")>-1&&(this.name="Netscape",this.isNS=!0));this.isWebkit=this.isSafari||this.isChrome,a.indexOf("windows")!=-1||a.indexOf("win32")!=-1?(this.isWindows=!0,this.environment="Windows"):a.indexOf("macintosh")!=-1&&(this.isMac=!0,this.environment="MacOS"),this.isIE||(this.isFirefox?/firefox[\/\s]((?:\d+\.?)+)/.test(a)&&(this.version=RegExp.$1):this.isSafari?/version[\/\s]((?:\d+\.?)+)/.test(a)&&(this.version=RegExp.$1):this.isChrome?/chrome[\/\s]((?:\d+\.?)+)/.test(a)&&(this.version=RegExp.$1):this.isNS?/netscape[\/\s]((?:\d+\.?)+)/.test(a)&&(this.version=RegExp.$1):this.isOpera&&/opera[\/\s]((?:\d+\.?)+)/.test(a)&&(this.version=RegExp.$1)),this.version&&(this.isFirefox?this.majorVersion=this.version.substring(0,3):this.majorVersion=this.version.substring(0,1)),this.code=this.name+this.majorVersion}}});
Aria.classDefinition({$classpath:"aria.utils.Callback",$constructor:function(a){a=this.$normCallback(a),this._scope=a.scope,this._function=a.fn,this._args=a.args},$destructor:function(){this._scope=null,this._function=null,this._args=null},$prototype:{call:function(a){return this._function.call(this._scope,a,this._args)}}});
(function(){var a="focusin",b="focusout",c=[],d=2,e=3,f=0,g=1,h=null,i=null,j=4,k=5;Aria.classDefinition({$classpath:"aria.utils.Event",$dependencies:["aria.utils.Type","aria.utils.Callback","aria.core.Browser"],$singleton:!0,$statics:{INVALID_TARGET:"Unable to add '%2' event on element %1"},$constructor:function(){this.typesUtil=aria.utils.Type,this.UA=aria.core.Browser,this.isIE=this.UA.ie;var a=this;this._unload=function(b){a._unloadEvent(b)}},$destructor:function(){this.reset(),this._unload=null},$prototype:{reset:function(){i&&(i=null,this._simpleRemove(Aria.$window,"unload",this._unload));for(var a=c.length-1;a>=0;a--){var b=c[a];b&&this.removeListener(b[f],b[g],b[d],a)}},_checkUnloadListeners:function(){i==null&&(i=[],this._simpleAdd(Aria.$window,"unload",this._unload))},_unloadEvent:function(a){var b=i;for(var c=0,d=b.length;c<d;++c){var e=b[c];e&&(e[k].call(this.getEvent(a)),b[c]=null,e=null)}},addListener:function(c,d,e,f,g,h){if(!e)return!1;"mousewheel"==d&&(this.UA.isIE?c==Aria.$window&&(c=c.document):this.UA.isOpera||this.UA.isSafari||this.UA.isWebkit||(d="DOMMouseScroll")),this.typesUtil.isFunction(e)||(h=f);var i=d!=a&&d!=b||!!this.UA.ie?h:!0;return this._addListener(c,this._getType(d),e,f,g,i)},_simpleAdd:function(){if(Aria.$window){if(Aria.$window.addEventListener)return function(a,b,c,d){a.addEventListener(b,c,d)};if(Aria.$window.attachEvent)return function(a,b,c,d){a.attachEvent("on"+b,c)}}return function(){}}(),_addListener:function(a,b,d,e,f,g){if(this._isValidCollection(a)){var h=!0;for(var j=0,k=a.length;j<k;++j)h=this._addListener(a[j],b,d,e,f,g)&&h;return h}if(this.typesUtil.isString(a)){var l=this.getElement(a);if(!l)return this.$logError(this.INVALID_TARGET,[a,b]),a=l,!1;a=l}if(!this.typesUtil.isHTMLElement(a))return!1;var m=d;if(!d.$Callback){if(!m.fn||!this.typesUtil.isFunction(m.fn))return!1;m.scope||(m.scope=a)}var n=d;d.$Callback||(n=new aria.utils.Callback(m));var o=function(b){return n.call(aria.utils.Event.getEvent(b,a))},p=[a,b,d,o,g,n];if("unload"==b&&f!==this)return this._checkUnloadListeners(),i[i.length]=p,!0;var q=c.length;c[q]=p;try{this._simpleAdd(a,b,o,g)}catch(r){return this.$logError(this.INVALID_TARGET,[a,b],r),this.removeListener(a,b,d),!1}return!0},_isValidCollection:function(a){try{return a&&typeof a!="string"&&a.length&&!a.tagName&&!a.alert&&typeof a[0]!="undefined"}catch(b){return!1}},getEvent:function(a,b){var c=a||Aria.$window.event;if(!c){var d=Aria.$window.Event,e=this.getEvent.caller;while(e){c=e.arguments[0];if(c&&d==c.constructor)break;e=e.caller}}return c},_getType:function(a){return this._specialTypes[a]||a},_specialTypes:{focusin:aria.core.Browser.isIE?"focusin":"focus",focusout:aria.core.Browser.isIE?"focusout":"blur"},removeListener:function(a,b,f){var g,l,m;"mousewheel"==b&&(this.UA.isIE?a==Aria.$window&&(a=a.document):!this.UA.isOpera&&!this.UA.isSafari&&(b="DOMMouseScroll")),b=this._getType(b);if(this.typesUtil.isString(a)){a=this.getElement(a);if(!a)return!1}else if(this._isValidCollection(a)){var n=!0;for(g=a.length-1;g>-1;g--)n=this.removeListener(a[g],b,f)&&n;return n}if(!f||!f.call&&!f.fn)return this.purgeElement(a,!1,b);if("unload"==b){if(i)for(g=i.length-1;g>-1;g--){m=i[g];var o;m&&aria.utils.Type.isObject(m[d])&&!m[d].$Callback?o="fn"in f&&m[d].fn==f.fn:o=m[d]==f;if(m&&m[0]==a&&m[1]==b&&o)return m[d]!=m[k]&&m[k].$dispose(),i.splice(g,1),!0}return!1}var p=null,q=arguments[3];"undefined"==typeof q&&(q=this._getCacheIndex(c,a,b,f)),q>=0&&(p=c[q]);if(!a||!p)return!1;var r=p[j]===!0?!0:!1;try{this._simpleRemove(a,b,p[e],r)}catch(s){return h=s,!1}return delete c[q][e],c[q][d]!=c[q][k]&&c[q][k].$dispose(),c.splice(q,1),!0},getElement:function(a){return typeof a=="string"?Aria.$window.document.getElementById(a):a},_getCacheIndex:function(a,b,c,e){var h;for(var i=0,j=a.length;i<j;i+=1){var k=a[i];k&&this.typesUtil.isObject(k[d])&&!k[d].$Callback?h="fn"in e&&k[d].fn==e.fn:h=k[d]==e;if(k&&h&&k[f]==b&&k[g]==c)return i}return-1},_simpleRemove:function(){if(Aria.$window){if(Aria.$window.removeEventListener)return function(a,b,c,d){a.removeEventListener(b,c,d)};if(Aria.$window.detachEvent)return function(a,b,c){a.detachEvent("on"+b,c)}}return function(){}}(),purgeElement:function(a,b,c){var d=this.typesUtil.isString(a)?this.getElement(a):a,e=this.getListeners(d,c),f,g;if(e)for(f=e.length-1;f>-1;f--){var h=e[f];this.removeListener(d,h.type,h.fn)}if(b&&d&&d.childNodes)for(f=0,g=d.childNodes.length;f<g;++f)this.purgeElement(d.childNodes[f],b,c)},getListeners:function(a,b){var e=[],h;b?b==="unload"?h=[i]:(b=this._getType(b),h=[c]):h=[c,i];var j=this.typesUtil.isString(a)?this.getElement(a):a;for(var k=0;k<h.length;k+=1){var l=h[k];if(l)for(var m=0,n=l.length;m<n;++m){var o=l[m];o&&o[f]===j&&(!b||b===o[g])&&e.push({type:o[g],fn:o[d],index:m})}}return e.length?e:null}}})})();
Aria.classDefinition({$classpath:"aria.utils.Math",$singleton:!0,$dependencies:["aria.utils.Type"],$constructor:function(){this.utilType=aria.utils.Type},$prototype:{normalize:function(a,b,c){var d=this.utilType.isNumber;return d(a)?(d(b)&&(a=Math.max(a,b)),d(c)&&(a=Math.min(a,c)),a):a},min:function(a,b){var c=this.utilType.isNumber,d=c(a),e=c(b);return!d&&!e?null:d?e?Math.min(a,b):a:b},max:function(a,b){var c=this.utilType.isNumber,d=c(a),e=c(b);return!d&&!e?null:d?e?Math.max(a,b):a:b}}});
(function(){var a=Array.prototype,b;Aria.classDefinition({$classpath:"aria.utils.Array",$singleton:!0,$constructor:function(){b=this},$destructor:function(){a=null,b=null},$prototype:{indexOf:a.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c=a.length;for(var d=0;d<c;d++)if(d in a&&a[d]===b)return d;return-1},contains:function(a,c){return b.indexOf(a,c)!=-1},clone:function(a){var b=a.slice(0);return b},remove:function(a,c){var d=b.indexOf(a,c);return d>-1?(b.removeAt(a,d),!0):!1},removeAt:function(a,b){return a.splice(b,1).length==1},isEmpty:function(a){return a.length===0},filter:a.filter?function(a,b,c){return a.filter(b,c)}:function(a,c,d){var e=b.clone(a),f=[];d=d||a;var g=e.length;for(var h=0;h<g;h++){var i=e[h];c.call(d,i,h,a)&&f.push(i)}return f},forEach:a.forEach?function(a,b,c){return a.forEach(b,c)}:function(a,c,d){var e=b.clone(a),f=[];d=d||a;var g=e.length;for(var h=0;h<g;h++)c.call(d,e[h],h,a);return f},extractValuesFromMap:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}}})})();
Aria.classDefinition({$classpath:"aria.utils.Function",$singleton:!0,$prototype:{bind:function(a,b){var c=[];for(var d=2;d<arguments.length;d++)c.push(arguments[d]);return function(){var d=c.slice(0);for(var e=0;e<arguments.length;e++)d.push(arguments[e]);return a.apply(b,d)}},wrapObjectFn:function(a,b,c,d){d||(d="");for(var e=0,f=c.length;e<f;e++){var g=c[e];b[d+g]=this.bind(a[g],a)}},bindCallback:function(a){return a=this.$normCallback(a),function(){a.fn.call(a.scope,arguments,a.args)}}}});